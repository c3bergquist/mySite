var $jsBody=$("#js-body"),jsDarkModeToggler=document.getElementById("js-dark-mode-toggler"),jsGamifyToggler=document.getElementById("js-gamify-toggler"),jsNavToggler=document.getElementById("js-nav-toggler"),jsNavDrawer=document.getElementById("js-nav-drawer"),jsNavOverlay=document.getElementById("js-nav-overlay");function toggleNav(){jsNavDrawer.classList.contains("a-open-menu")?(jsNavDrawer.classList.remove("a-open-menu"),jsNavOverlay.classList.remove("a-open-menu")):(jsNavDrawer.classList.add("a-open-menu"),jsNavOverlay.classList.add("a-open-menu"))}document.addEventListener("DOMContentLoaded",function(e){var t=sessionStorage.getItem("isDarkMode"),t=(JSON.parse(t)&&$jsBody[0].classList.add("is-dark-mode"),sessionStorage.getItem("isGamified"));JSON.parse(t)&&$jsBody[0].classList.add("is-gamified")}),jsDarkModeToggler.addEventListener("click",function(){$jsBody[0].classList.contains("is-dark-mode")?($jsBody[0].classList.remove("is-dark-mode"),sessionStorage.setItem("isDarkMode",!1)):($jsBody[0].classList.contains("is-gamified")&&($jsBody[0].classList.remove("is-gamified"),sessionStorage.setItem("isGamified",!1)),$jsBody[0].classList.add("is-dark-mode"),sessionStorage.setItem("isDarkMode",!0)),toggleNav()}),jsGamifyToggler.addEventListener("click",function(){$jsBody[0].classList.contains("is-gamified")?($jsBody[0].classList.remove("is-gamified"),sessionStorage.setItem("isGamified",!1)):($jsBody[0].classList.contains("is-dark-mode")&&($jsBody[0].classList.remove("is-dark-mode"),sessionStorage.setItem("isDarkMode",!1)),$jsBody[0].classList.add("is-gamified"),sessionStorage.setItem("isGamified",!0)),toggleNav()}),jsNavToggler.addEventListener("click",function(){toggleNav()}),jsNavOverlay.addEventListener("click",function(){toggleNav()}),function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=e}();var canvas=document.getElementById("world"),ctx=canvas.getContext("2d"),canvasHeight=canvas.offsetHeight,canvasWidth=canvas.offsetWidth,controls={goDownPipe:!1,jump:!1,left:!1,right:!1},friction=.9,gravity=.5,boxes=[],player={x:0,y:0,width:100,height:100,speed:7,jumpForce:7,velX:0,velY:0,direction:1,jumping:!1,goingDownPipe:!1,grounded:!1,image:new Image},sprite={height:100,width:100,x:538,y:0},firstPipe=(player.image.src="./images/marioMe_sprites.png",boxes.push({x:-5,y:canvasHeight-125,width:canvasWidth+10,height:10}),canvasWidth/2-200);function update(){if(ctx.clearRect(0,0,canvasWidth,canvasHeight),drawPlayer(),!player.goingDownPipe){!controls.jump||player.jumping||(player.velY=2*-player.jumpForce,player.jumping=!0),controls.right&&(player.direction=1,player.velX<player.speed&&player.velX++),controls.left&&(player.direction=0,player.velX>-player.speed&&player.velX--),player.x+=player.velX,player.y+=player.velY,player.velX*=friction,player.velY+=gravity,player.grounded=!1;for(var e=0;e<boxes.length;e++){var t=colliderCheck(boxes[e]);"left"==t||"right"==t?player.velX=0:"bottom"==t?(player.jumping=!1,player.grounded=!0,0<e&&controls.goDownPipe&&goDownPipe(e,boxes[e])):"top"==t&&(player.velY*=-1)}player.grounded&&(player.velY=0),player.x>=canvasWidth-player.width?player.x=canvasWidth-player.width:player.x<=0&&(player.x=0)}requestAnimationFrame(update)}function rebuildWorld(){canvasHeight=canvas.offsetHeight,canvasWidth=canvas.offsetWidth,boxes[0].x=-5,boxes[0].y=canvasHeight,boxes[0].width=canvasWidth+10,boxes[0].height=10;var e=canvasWidth/2-200;boxes[1].x=e,boxes[1].y=canvasHeight-116,boxes[1].width=96,boxes[1].height=116,boxes[2].x=250+e,boxes[2].y=canvasHeight-116,boxes[2].width=96,boxes[2].height=116,boxes[3].x=500+e,boxes[3].y=canvasHeight-116,boxes[3].width=96,boxes[3].height=116,ctx.canvas.height=canvasHeight,ctx.canvas.width=canvasWidth}function respawn(){player.x=130,player.y=canvasHeight-125,player.direction=1,player.grounded=!1}function drawPlayer(){setSprite(),ctx.drawImage(player.image,sprite.x,0,sprite.width,sprite.height,player.x,player.y,player.width,player.height)}function colliderCheck(e){var t=player.x+player.width/2-(e.x+e.width/2),a=player.y+player.height/2-(e.y+e.height/2),i=player.width/2+e.width/2,e=player.height/2+e.height/2,o=null;return Math.abs(t)<i&&Math.abs(a)<e&&((i=i-Math.abs(t))<(e=e-Math.abs(a))?0<t?(o="left",player.x+=i):(o="right",player.x-=i):0<a?(o="top",player.y+=e):(o="bottom",player.y-=e)),o}boxes.push({x:firstPipe,y:canvasHeight-116,width:96,height:116}),boxes.push({x:firstPipe+250,y:canvasHeight-116,width:96,height:116}),boxes.push({x:firstPipe+500,y:canvasHeight-116,width:96,height:116});var counter=0;function setSprite(){player.jumping?1==player.direction?sprite.x=1375:sprite.x=0:0<player.velX&&controls.left?stopRight():1<player.velX?runRight():player.velX<-1&&controls.right?stopLeft():player.velX<-1?runLeft():((1==player.direction?idleRight:idleLeft)(),counter=0)}function idleRight(){sprite.x=750}function idleLeft(){sprite.x=625}function runRight(){counter<150?counter+=+player.velX:counter=0,counter<=50?sprite.x=875:50<counter&&counter<=100?sprite.x=1e3:100<counter&&counter<=150&&(sprite.x=1125)}function stopRight(){sprite.x=125}function runLeft(){counter<150?counter-=+player.velX:counter=0,counter<=50?sprite.x=500:50<counter&&counter<=100?sprite.x=375:100<counter&&counter<=150&&(sprite.x=250)}function stopLeft(){sprite.x=1250}function goDownPipe(e,t){player.goingDownPipe=!0;var a=setInterval(function(){gravity=0,player.goingDownPipe=!0,player.x=player.x-(player.x-t.x)/10,player.y+=1},10);"1"==e&&setTimeout(function(){clearInterval(a),window.location.href="./about.html"},1150),"2"==e&&setTimeout(function(){clearInterval(a),window.location.href="./portfolio.html"},1150),"3"==e&&setTimeout(function(){clearInterval(a),window.open("./resume.html","_blank"),window.location.reload()},1150)}window.addEventListener("keydown",function(e){"KeyS"!=e.code&&"ArrowDown"!=e.code||(e.preventDefault(),controls.goDownPipe=!0),"KeyW"!=e.code&&"ArrowUp"!=e.code||(e.preventDefault(),controls.jump=!0),"KeyA"!=e.code&&"ArrowLeft"!=e.code||(e.preventDefault(),controls.left=!0),"KeyD"!=e.code&&"ArrowRight"!=e.code||(e.preventDefault(),controls.right=!0)}),window.addEventListener("keyup",function(e){"KeyS"!=e.code&&"ArrowDown"!=e.code||(controls.goDownPipe=!1),"KeyW"!=e.code&&"ArrowUp"!=e.code||(e.preventDefault(),controls.jump=!1),"KeyA"!=e.code&&"ArrowLeft"!=e.code||(e.preventDefault(),controls.left=!1),"KeyD"!=e.code&&"ArrowRight"!=e.code||(e.preventDefault(),controls.right=!1)}),window.addEventListener("load",function(){rebuildWorld(),respawn(),update()}),window.addEventListener("resize",function(){rebuildWorld(),respawn()});